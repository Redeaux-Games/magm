<!DOCTYPE html>
  <head>
        <meta charset="utf-8">
        <title>Thanks for purchasing a MAGMAðŸŒ‹LOTTO ticket!| MAGMA</title>
        <!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="apple-touch-icon" sizes="57x57" href="../../images/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="../../images/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="../../images/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="../../images/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="../../images/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="../../images/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="../../images/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="../../images/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192"  href="../../images/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="../../images/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16.png">
        <meta name="msapplication-TileColor" content="#ff0000">
        <meta name="msapplication-TileImage" content="../../images/ms-icon-144x144.png">
        <meta name="theme-color" content="#1a1a1a">  
        <link rel="stylesheet" href="style.css">
	<style>
	body {
	    background-color: #222222 !important;
	}
		
			
	.disintegration-container {
	  position: absolute;
	  pointer-events: none;

	  > canvas {
	    position: absolute;
	    left: 0;
	    top: 0;
	    transition: transform 1s ease-out, opacity 1s ease-out;
	    opacity: 1;
	    transform:
	      rotate(0deg) translate(0px, 0px) rotate(0deg);
	  }
	}

	@keyframes debug-pulse {
	  0% { filter: none; }
	  95% { filter: none; }
	  95% { filter: drop-shadow(0 1px 0 rgba(255,0,0,1)); }
	  100% { filter: drop-shadow(0 1px 0 rgba(255,0,0,1)); }
	}

	/* == Normal styling below == */
	body {
	  margin: 0;
	  min-height: 100%;
	  min-width: 100%;
	  display: flex;
	  flex-direction: column;
	  justify-content: center;
	  align-items: center;
	}

	.item {
	  max-width: 100%;
	  max-height: 100%;
	  margin-bottom: 0em;
	  padding: 0em;
	  border-radius: 0px;
	  border: 0px solid #ddd;
	}
	</style>

  </head>
<body>
  <div class="item disintegration-target">
        <script>
         setTimeout(function(){
            window.location.href = '777-afhruiurYUOIUN7e8fhwu/';
         }, 5000);
       </script>
    <section class="page-section bg-dark">

	    <form action="hhttps://magma.reflipd.workers.dev/" method="get" v-if="isPaid && settings.success">
		  <label for="txId"></label>
		  <input type="hidden" name="txId" value="this.transactions.transactions[0].id"/>
            </form>
      <center><h1>MAGMA ðŸŒ‹ LOTTO</h1></center>
      <div class="container relative">
      <div class="mb-20 mb-md-10">
        <center><h4>Thanks for purchasing your MAGMAðŸŒ‹LOTTO Ticket!</h4></center>
        <br>
	      <h5><center>You are being redirected to choose your numbers in <span id="count">5</span> seconds, if the page doesn't redirect then <a href="777-afhruiurYUOIUN7e8fhwu/">click here</a>!</center></h5>
      <br>
      <br>
	</div>
    </section>
	    <script type="text/javascript">

		window.onload = function(){

		(function(){
		  var counter = 5;

		  setInterval(function() {
		    counter--;
		    if (counter >= 0) {
		      span = document.getElementById("count");
		      span.innerHTML = counter;
		    }
		    // Display 'counter' wherever you want to display it.
		    if (counter === 0) {
		    //    alert('this is where it happens');
			clearInterval(counter);
		    }

		  }, 500);

		})();

		}

	   </script>
	    <script>
	        const DEBUG = false;
		const REPETITION_COUNT = 3; // number of times each pixel is assigned to a canvas
		const NUM_FRAMES = 128;

		/**
		 * Generates the individual subsets of pixels that are animated to create the effect
		 * @param {HTMLCanvasElement} ctx
		 * @param {number} count The higher the frame count, the less grouped the pixels will look - Google use 32, but for our elms we use 128 since we have images near the edges
		 * @return {HTMLCanvasElement[]} Each canvas contains a subset of the original pixels
		 */
		function generateFrames($canvas, count = 32) {
		  const { width, height } = $canvas;
		  const ctx = $canvas.getContext("2d");
		  const originalData = ctx.getImageData(0, 0, width, height);
		  const imageDatas = [...Array(count)].map(
		    (_,i) => ctx.createImageData(width, height)
		  );

		  // assign the pixels to a canvas
		  // each pixel is assigned to 2 canvas', based on its x-position
		  for (let x = 0; x < width; ++x) {
		    for (let y = 0; y < height; ++y) {
		      for (let i = 0; i < REPETITION_COUNT; ++i) {
			const dataIndex = Math.floor(
			  count * (Math.random() + 2 * x / width) / 3
			);
			const pixelIndex = (y * width + x) * 4;
			// copy the pixel over from the original image
			for (let offset = 0; offset < 4; ++offset) {
			  imageDatas[dataIndex].data[pixelIndex + offset]
			    = originalData.data[pixelIndex + offset];
			}
		      }
		    }
		  }

		  // turn image datas into canvas'
		  return imageDatas.map(data => {
		    const $c = $canvas.cloneNode(true);
		    $c.getContext("2d").putImageData(data, 0, 0);
		    return $c;
		  });
		}

		/**
		 * Inserts a new element over an old one, hiding the old one
		 */
		function replaceElementVisually($old, $new) {
		  const $parent = $old.offsetParent;
		  $new.style.top = `${$old.offsetTop}px`;
		  $new.style.left = `${$old.offsetLeft}px`;
		  $new.style.width = `${$old.offsetWidth}px`;
		  $new.style.height = `${$old.offsetHeight}px`;
		  $parent.appendChild($new);
		  $old.style.visibility = "hidden";
		}

		/**
		 * Disintegrates an element
		 * @param {HTMLElement} $elm
		 */
		function disintegrate($elm) {
		  html2canvas($elm).then($canvas => {    
		    // create the container we'll use to replace the element with
		    const $container = document.createElement("div");
		    $container.classList.add("disintegration-container");

		    // setup the frames for animation
		    const $frames = generateFrames($canvas, NUM_FRAMES);
		    $frames.forEach(($frame, i) => {
		      $frame.style.transitionDelay = `${1.35 * i / $frames.length}s`;
		      $container.appendChild($frame);
		    });

		    // then insert them into the DOM over the element
		    replaceElementVisually($elm, $container);

		    // then animate them
		    $container.offsetLeft; // forces reflow, so CSS we apply below does transition
		    if (!DEBUG) {
		      // set the values the frame should animate to
		      // note that this is done after reflow so the transitions trigger
		      $frames.forEach($frame => {
			const randomRadian = 2 * Math.PI * (Math.random() - 0.5);
			$frame.style.transform = 
			  `rotate(${15 * (Math.random() - 0.5)}deg) translate(${60 * Math.cos(randomRadian)}px, ${30 * Math.sin(randomRadian)}px)
		rotate(${15 * (Math.random() - 0.5)}deg)`;
					  $frame.style.opacity = 0;
		      });
		    } else {
		      $frames.forEach($frame => {
			$frame.style.animation = `debug-pulse 1s ease ${$frame.style.transitionDelay} infinite alternate`;
		      });
		    }
		  });
		}


		/** === Below is just to bind the module and the DOM == */
		[...document.querySelectorAll(".disintegration-target")].forEach($elm => {
		  $elm.addEventListener("unload", () => {
		    if ($elm.disintegrated) { return; }
		    $elm.disintegrated = true;
		    disintegrate($elm);
		  });
		});
	    </script>
            <link rel="stylesheet" href="../../css/bootstrap.min.css">
            <link rel="stylesheet" href="../../css/style.css">
            <link rel="stylesheet" href="../../css/style-responsive.css">       
            <link rel="stylesheet" href="../../css/tweaks.css">
            <link rel="stylesheet" href="../../css/colors/black.css">
   </div>
</body>
</html>
